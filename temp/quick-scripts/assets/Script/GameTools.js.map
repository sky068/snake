{"version":3,"sources":["GameTools.js"],"names":["GameTools","sharePicture","pickName","title","undefined","CC_WECHATGAME","window","wx","shareAppMessage","query","success","res","shareTickets","length","postMessage","command","shareTicket","cc","log","pushScore","score","console","module","exports"],"mappings":";;;;;;AAAA;;AAEA,IAAIA,YAAY;AACZ;AACAC,gBAFY,wBAECC,QAFD,EAEU;AAClB,YAAIC,QAAQ,WAAZ;AACA,YAAID,YAAY,aAAhB,EAA8B;AAC1BC,oBAAQ,yBAAR;AACH,SAFD,MAEO,IAAID,YAAYE,SAAZ,IAAyBF,YAAY,IAAzC,EAA+C;AAClD;AACAC,oBAAQ,QAAQD,QAAR,GAAmB,IAAnB,GAA0BC,KAAlC;AACH;;AAED,YAAIE,aAAJ,EAAkB;AACdC,mBAAOC,EAAP,CAAUC,eAAV,CAA0B;AACtBL,uBAAOA,KADe;AAEtBM,uBAAO,OAFe;AAGtB;AACA;AACA;AACA;AACAC,yBAAS,iBAACC,GAAD,EAAS;AACd,wBAAIA,IAAIC,YAAJ,IAAoBR,SAApB,IAAiCO,IAAIC,YAAJ,CAAiBC,MAAjB,GAA0B,CAA/D,EAAiE;AAC7D,4BAAIX,YAAY,cAAhB,EAA+B;AAC3B;AACAI,mCAAOC,EAAP,CAAUO,WAAV,CAAsB;AAClBC,yCAAS,YADS;AAElBC,6CAAaL,IAAIC,YAAJ,CAAiB,CAAjB;AAFK,6BAAtB;AAIH;AACJ;AACJ;AAjBqB,aAA1B;AAmBH,SApBD,MAoBM;AACFK,eAAGC,GAAH,CAAO,OAAP;AACH;AACJ,KAlCW;AAoCZC,aApCY,qBAoCFC,KApCE,EAoCI;AACZ,YAAIf,aAAJ,EAAmB;AACfgB,oBAAQH,GAAR,CAAY,SAASE,KAArB;AACAd,mBAAOC,EAAP,CAAUO,WAAV,CAAsB;AAClBC,yBAAS,WADS;AAElBK,uBAAOA;AAFW,aAAtB;AAIH,SAND,MAMO;AACHH,eAAGC,GAAH,CAAO,UAAUE,KAAjB;AACH;AACJ;AA9CW,CAAhB;;AAkDAE,OAAOC,OAAP,GAAiBvB,SAAjB","file":"GameTools.js","sourceRoot":"../../../../assets/Script","sourcesContent":["// let canvas = require(\"../../build/wechatgame/libs/weapp-adapter/window\");\n\nlet GameTools = {\n    // pickname == 'shareTicket' 则拉取群排名\n    sharePicture(pickName){\n        let title = \"一起来玩贪吃蛇吧!\";\n        if (pickName == \"shareTicket\"){\n            title = \"看看你在群里排第几？快来和我一起挑战贪吃蛇吧.\";\n        } else if (pickName != undefined && pickName != null) { \n            // 结束分享\n            title = \"我的了\" + pickName + \"分,\" + title;\n        }\n\n        if (CC_WECHATGAME){\n            window.wx.shareAppMessage({\n                title: title,\n                query: \"score\",\n                // imageUrl: canvas.toTempFilePathSync({\n                //     destWith: 300,\n                //     destHeight: 200,\n                // }),\n                success: (res) => {\n                    if (res.shareTickets != undefined && res.shareTickets.length > 0){\n                        if (pickName == \"shareTickets\"){\n                            // 查询群排名\n                            window.wx.postMessage({\n                                command: \"fetchGroup\",\n                                shareTicket: res.shareTickets[0]\n                            });\n                        }\n                    }\n                }\n            });\n        } else{\n            cc.log(\"执行了截图\");\n        }\n    },\n\n    pushScore(score){\n        if (CC_WECHATGAME) {\n            console.log('提交分数' + score);\n            window.wx.postMessage({\n                command: \"pushScore\",\n                score: score,\n            });\n        } else {\n            cc.log(\"提交得分:\" + score)\n        }\n    }\n\n};\n\nmodule.exports = GameTools;"]}