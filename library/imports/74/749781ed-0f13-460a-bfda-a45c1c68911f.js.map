{"version":3,"sources":["../../../../assets/Script/assets/Script/GameOverCtrl.js"],"names":["cc","Class","extends","Component","properties","shareTicket","rankPanel","Sprite","start","CC_WECHATGAME","tex","Texture2D","window","sharedCanvas","width","height","getRank","wx","postMessage","command","log","_updateSubDomainCanvas","undefined","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","node","active","update","dt"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAa,IADL;AAERC,mBAAWN,GAAGO;AAFN,KAHP;;AAQL;;AAEA;;AAEAC,SAZK,mBAYI;AACL,YAAIC,aAAJ,EAAkB;AACd,iBAAKC,GAAL,GAAW,IAAIV,GAAGW,SAAP,EAAX;AACAC,mBAAOC,YAAP,CAAoBC,KAApB,GAA4B,GAA5B;AACAF,mBAAOC,YAAP,CAAoBE,MAApB,GAA6B,GAA7B;AACH;AACJ,KAlBI;AAoBLC,WApBK,qBAoBI;AACL,YAAIP,aAAJ,EAAmB;AACf;AACA,gBAAI,KAAKJ,WAAL,IAAoB,IAAxB,EAA8B;AAC1BO,uBAAOK,EAAP,CAAUC,WAAV,CAAsB;AAClB;AACA;AACA;AAHkB,iBAAtB;AAKH,aAND,MAMO;AACHN,uBAAOK,EAAP,CAAUC,WAAV,CAAsB;AAClBC,6BAAS;AADS,iBAAtB;AAGH;AACJ,SAbD,MAaO;AACH;AACA;AACA;AACAnB,eAAGoB,GAAH,CAAO,UAAP;AACH;AACJ,KAxCI;AA0CLC,0BA1CK,oCA0CmB;AACpB,YAAIZ,aAAJ,EAAmB;AACf,gBAAIG,OAAOC,YAAP,IAAuBS,SAA3B,EAAsC;AAClC,qBAAKZ,GAAL,CAASa,eAAT,CAAyBX,OAAOC,YAAhC;AACA,qBAAKH,GAAL,CAASc,mBAAT;AACA,qBAAKlB,SAAL,CAAemB,WAAf,GAA6B,IAAIzB,GAAG0B,WAAP,CAAmB,KAAKhB,GAAxB,CAA7B;AACH;AACJ;;AAED,aAAKJ,SAAL,CAAeqB,IAAf,CAAoBC,MAApB,GAA6BnB,aAA7B;AACH,KApDI;AAsDLoB,UAtDK,kBAsDGC,EAtDH,EAsDO;AACR,aAAKT,sBAAL;AACH;AAxDI,CAAT","file":"GameOverCtrl.js","sourceRoot":"../../../../assets/Script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        shareTicket: null,\n        rankPanel: cc.Sprite,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        if (CC_WECHATGAME){\n            this.tex = new cc.Texture2D();\n            window.sharedCanvas.width = 362;\n            window.sharedCanvas.height = 640;\n        }\n    },\n\n    getRank(){\n        if (CC_WECHATGAME) {\n            // 发消息给子域\n            if (this.shareTicket != null) {\n                window.wx.postMessage({\n                    // messageType: 5,\n                    // MAIN_MENU_NUM: GameConfig.MAIN_MENU_NUM,\n                    // shareTicket: this.shareTicket\n                });\n            } else {\n                window.wx.postMessage({\n                    command: \"fetchFriends\",\n                });\n            }\n        } else {\n            // let gameTypeNode = new cc.Node();\n            // gameTypeNode.addComponent(cc.Label).string = \"暂无排行榜数据\";\n            // this.node.addChild(gameTypeNode);\n            cc.log(\"获取排行榜数据。\");\n        }\n    },\n\n    _updateSubDomainCanvas(){\n        if (CC_WECHATGAME) {\n            if (window.sharedCanvas != undefined) {\n                this.tex.initWithElement(window.sharedCanvas);\n                this.tex.handleLoadedTexture();\n                this.rankPanel.spriteFrame = new cc.SpriteFrame(this.tex);\n            }\n        }\n\n        this.rankPanel.node.active = CC_WECHATGAME;\n    },\n\n    update (dt) {\n        this._updateSubDomainCanvas();\n    },\n});\n"]}